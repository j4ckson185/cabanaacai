<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página de Pagamento</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f9f9f9;
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
        }
        input[type="text"], input[type="email"], input[type="tel"], select {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        input[type="radio"] {
            margin-right: 8px;
        }
        .radio-label {
            display: inline-block;
            margin-right: 20px;
        }
        .radio-group {
            margin-bottom: 10px;
        }
        .botoes {
            text-align: center;
            margin-top: 20px;
        }
        .btn-enviar {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 4px;
            color: #fff;
            background-color: #2196F3;
        }
        .btn-enviar:hover {
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Página de Pagamento</h1>
        <div class="form-group">
            <label for="nome-sobrenome">Nome Completo:</label>
            <input type="text" id="nome-sobrenome" name="nome-sobrenome" required>
        </div>
        <div class="form-group">
            <label for="cep">CEP:</label>
            <input type="text" id="cep" name="cep" required>
        </div>
        <div class="form-group">
            <label for="endereco">Endereço:</label>
            <input type="text" id="endereco" name="endereco" required>
        </div>
        <div class="form-group">
            <label for="numero">Número:</label>
            <input type="text" id="numero" name="numero" required>
        </div>
        <div class="form-group">
            <label for="complemento">Complemento:</label>
            <input type="text" id="complemento" name="complemento">
        </div>
        <div class="form-group">
            <label for="telefone">Telefone:</label>
            <input type="tel" id="telefone" name="telefone" required>
        </div>
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
        </div>
        <div class="form-group">
            <label>Método de Pagamento:</label>
            <div class="radio-group">
                <input type="radio" id="dinheiro" name="payment-method" value="dinheiro" required>
                <label class="radio-label" for="dinheiro">Dinheiro</label>
                <input type="radio" id="cartao" name="payment-method" value="cartao" required>
                <label class="radio-label" for="cartao">Cartão</label>
                <input type="radio" id="pix" name="payment-method" value="pix" required>
                <label class="radio-label" for="pix">Pix</label>
            </div>
            <div id="pix-instrucao" style="display: none; margin-top: 10px;">
                <p><strong>Nosso Pix:</strong> 84 9 8873-1028 (Pagseguro)</p>
                <p>Envie o comprovante para nosso whatsapp após finalizar este pedido.</p>
            </div>
        </div>
        <div class="form-group">
            <label for="troco">Troco para:</label>
            <input type="text" id="troco" name="troco">
        </div>
        <div class="botoes">
            <button class="btn-enviar" onclick="enviarPedidoWhatsApp()">Enviar Pedido pelo WhatsApp</button>
        </div>
    </div>

    <script>
        function enviarPedidoWhatsApp() {
            const nomeSobrenome = document.getElementById('nome-sobrenome').value;
            const cep = document.getElementById('cep').value;
            const endereco = document.getElementById('endereco').value;
            const numero = document.getElementById('numero').value;
            const complemento = document.getElementById('complemento').value;
            const telefone = document.getElementById('telefone').value;
            const email = document.getElementById('email').value;
            const metodoPagamento = document.querySelector('input[name="payment-method"]:checked').value;
            const troco = document.getElementById('troco').value;
            const carrinho = JSON.parse(sessionStorage.getItem('carrinho')) || [];

            let mensagem = `*Pedido Cabana Açaí*\n\n`;
            mensagem += `*Nome:* ${nomeSobrenome}\n`;
            mensagem += `*CEP:* ${cep}\n`;
            mensagem += `*Endereço:* ${endereco}, ${numero}\n`;
            if (complemento) {
                mensagem += `*Complemento:* ${complemento}\n`;
            }
            mensagem += `*Telefone:* ${telefone}\n`;
            mensagem += `*Email:* ${email}\n`;
            mensagem += `*Método de Pagamento:* ${metodoPagamento}\n`;
            if (metodoPagamento === 'dinheiro' && troco) {
                mensagem += `*Troco para:* ${troco}\n`;
            }

            mensagem += `\n*Detalhes do Pedido:*\n`;
            carrinho.forEach(item => {
                let itemDetails = `-${item.nome}: ${formatarMoeda(item.preco)}\n`;
                if (item.sabores1 && item.sabores2) {
                    itemDetails += `  Sabores (Açaí 1): ${item.sabores1.join(', ')}\n`;
                    itemDetails += `  Sabores (Açaí 2): ${item.sabores2.join(', ')}\n`;
                    itemDetails += `  Acompanhamentos (Açaí 1): ${item.acompanhamentos1.join(', ')}\n`;
                    itemDetails += `  Acompanhamentos (Açaí 2): ${item.acompanhamentos2.join(', ')}\n`;
                    itemDetails += `  Itens Extras (Açaí 1): ${item.extras1.join(', ')}\n`;
                    itemDetails += `  Itens Extras (Açaí 2): ${item.extras2.join(', ')}\n`;
                } else {
                    itemDetails += `  Sabores: ${item.sabores ? item.sabores.join(', ') : item.sabores1.join(', ')}\n`;
                    itemDetails += `  Acompanhamentos: ${item.acompanhamentos ? item.acompanhamentos.join(', ') : item.acompanhamentos1.join(', ')}\n`;
                    itemDetails += `  Itens Extras: ${item.extras ? item.extras.join(', ') : item.extras1.join(', ')}\n`;
                }
                mensagem += itemDetails;
            });

            const totalPedido = parseFloat(document.getElementById('total').textContent.replace('R$', '').replace(',', '.')); // Total do pedido
            mensagem += `\n*Taxa de Entrega:* ${formatarMoeda(deliveryOption)}\n`;
            mensagem += `*Desconto:* ${formatarMoeda(desconto)}\n`;
            mensagem += `*Total do Pedido:* ${formatarMoeda(totalPedido)}`;

            const whatsappLink = `https://wa.me/5584986468750?text=${encodeURIComponent(mensagem)}`;
            window.open(whatsappLink, '_blank');
        }

        function formatarMoeda(valor) {
            return valor.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        }

        // Mostrar mensagem do Pix se selecionado
        const pixRadio = document.getElementById('pix');
        const pixInstrucao = document.getElementById('pix-instrucao');
        pixRadio.addEventListener('change', function() {
            if (this.checked) {
                pixInstrucao.style.display = 'block';
            } else {
                pixInstrucao.style.display = 'none';
            }
        });
    </script>
</body>
</html>
